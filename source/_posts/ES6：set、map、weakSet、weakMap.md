---
title: ES6：set、map、weakSet、weakMap
date: 2019-10-19 20:11:38
tags: ES
category: 技术
---

<meta name="referrer" content="no-referrer"/>

### 1、map（字典）

`{1: 2, 3: 4}`

- Map 对象保存键值对。
- 任何值（对象或者原始值）都可以作为一个键或一个值；
- 强引用存储类型
- null 会被当作 undefined
- 虽然 NaN !== NaN，但是 map 中 NaN 是与 NaN 相等的。

<!--more-->

**缺点**

- 性能不及 WeakMap
- 强引用，垃圾回收算法不能及时清理，容易内存泄漏

### 2、WeakMap

WeakMap 对象是一组键/值对的集合，其中的键是弱引用的。其键必须是对象，而值可以是任意的。

**缺点**

由于弱引用，key 是不确定的，所以 WeakMap 的 key 是不可枚举的。

### 3、Set（集合）

`[1, 2, 3, 4]`

Set 本身是一种构造函数，用来生成 Set 数据结构。

set 对象允许任何类型的唯一值，无论是原始值或者是对象引用。

NaN 和 undefined 都可以被存储在 Set 中，NaN 之间被视为相同的值（尽管 NaN !== NaN）

与 array 的区别：

- 不能出现重复的值
- 没有索引值（唯一且无序）

Array.from 方法可以将 Set 结构转为数组。

### 4、WeakSet

`{[1, 2], [3, 4]}`

WeakSet 对象允许将弱引用对象存储在一个集合中

- WeakSet 对象中只能存放对象引用，不能存放值，而 Set 对象都可以
- WeakSet 对象中存储的对象都是被弱引用的，如果没有其他的变量或属性引用这个对象值，则这个对象值会被当做垃圾回收掉，正式因为这样，WeakSet 对象是无法枚举的，没有办法拿到它包含的所有元素

### 5、Object

- key 只能是字符串
- 迭代顺序有可能不同于插入的顺序
- 长度只能手动计算

### 6、Array

- 有 index 索引值
- 可出现重复值

### 7、字典（map）和集合（set）的区别

- 共同点：集合和字典可以存储不重复的值；
- 不同点：集合是以[值，值]的形式存储元素，字典是以[键，值]的形式存储。

[参考](https://juejin.im/post/5e1d2717e51d4557e97b109b)
